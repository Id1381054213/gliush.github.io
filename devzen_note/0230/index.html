<!DOCTYPE html>
<html lang="en-us">
    <head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
		<title>
				Notes for episode-0230 &middot; Gliush Notebook
		</title>
	
		
  		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro">
	
		
		<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
	
		
		<link href="" rel="alternate" type="application/rss+xml" title="Gliush Notebook" />
	</head>
	

    <body>
        		<nav class="nav">
			<div class="nav-container">
				<a href="/">
					<h2 class="nav-title">Gliush Notebook</h2>
				</a>
				<ul>
    <li><a href="/about">About</a></li>
    <li><a href="/">Posts</a></li>
</ul>
			</div>
		</nav>

        

<main>
	<div class="post">
        <div class="post-title">Notes for episode-0230</div>
        <div class="post-line"></div>

		

		

<h1 id="another-reason-why-your-docker-containers-may-be-slow">Another reason why your Docker containers may be slow</h1>

<p><a href="https://hackernoon.com/another-reason-why-your-docker-containers-may-be-slow-d37207dec27f">https://hackernoon.com/another-reason-why-your-docker-containers-may-be-slow-d37207dec27f</a></p>

<ul>
<li>They use docker for dev,CI/CD</li>
<li>Dockerized prod was VERY slow (comparing to bare-metal installation)</li>
<li>72CPU / 512GB Hosts -&gt; 3-4 copies of containers, and then slows down</li>
<li>Requests: seconds to process</li>
<li>Found article <a href="https://sysdig.com/blog/container-isolation-gone-wrong/">https://sysdig.com/blog/container-isolation-gone-wrong/</a>.</li>
<li>Used perf for debugging</li>
<li><code>posix_fadvise</code> call (announce an intention to access file data in a specific pattern in the future)</li>
<li>glog used it to &ldquo;LogFileObject::Write&rdquo;, can be turned off by an option</li>
<li>Improved: 2sec -&gt; 8ms! Bingo.</li>
<li>&ldquo;because there we had only one copy of each process per machine/kernel&rdquo; - they didn&rsquo;t see a problem on bare metal</li>
<li>their conclusions:

<ul>
<li>&ldquo;isolated&rdquo; processes compete not only for CPU, RAM, disk, network, but also Linux</li>
<li>intruders could slow down / break your system even in containers</li>
<li>perf - must have</li>
</ul></li>
<li>IMHO:

<ul>
<li>docker in the title is for buzzzz</li>
<li>just a happy-end story about perf-debugging</li>
</ul></li>
</ul>


		
	</div>

	<div class="pagination">
		<a href="/devzen_note/0229/" class="left arrow">&#8592;</a>
		<a href="/devzen_note/0238/" class="right arrow">&#8594;</a>

		<a href="#" class="top">Top</a>
	</div>
</main>


        		<footer>
			<span>
			&copy; <time datetime="2019-07-13 22:10:05.926962 &#43;0300 MSK m=&#43;0.069191276">2019</time> . Made with <a href='https://gohugo.io'>Hugo</a> using the <a href='https://github.com/EmielH/tale-hugo/'>Tale</a> theme.
			</span>
		</footer>

    </body>
</html>
