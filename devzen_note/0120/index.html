<!DOCTYPE html>
<html lang="en-us">
    <head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
		<title>
				Notes for episode-0120 &middot; Gliush Notebook
		</title>
	
		
  		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro">
	
		
		<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
	
		
		<link href="" rel="alternate" type="application/rss+xml" title="Gliush Notebook" />
	</head>
	

    <body>
        		<nav class="nav">
			<div class="nav-container">
				<a href="/">
					<h2 class="nav-title">Gliush Notebook</h2>
				</a>
				<ul>
    <li><a href="/about">About</a></li>
    <li><a href="/">Posts</a></li>
</ul>
			</div>
		</nav>

        

<main>
	<div class="post">
        <div class="post-title">Notes for episode-0120</div>
        <div class="post-line"></div>

		

		

<h1 id="handling-overload">Handling Overload</h1>

<p><a href="http://ferd.ca/handling-overload.html">http://ferd.ca/handling-overload.html</a></p>

<ul>
<li>идея статьи - из спора о необходимости иметь бесконечный mailbox для процесса (все равно ограничение - в размере оперативки)</li>
<li>?Критика flow control остается в preemptive языках (Go). Кооперативные языки (Akka, Node.js) имеют неявные механизмы (большая нагрузка на CPU рано блокируется раньше)</li>
<li>naive system - tasks are done asynchronously. No control, you hope for the best</li>
<li>Usually, one of the part is not parallelized -&gt; bottleneck -&gt; problem with the size of the mailbox</li>
<li>backpressure - default way in most languages,  because function call is synced (you do smth, and return smth when everything is done)</li>
<li>all the servers have some limit of concurrent requests</li>
<li>Erlang is asynced by default (multi-process communication) (???not true for OTP?)</li>
<li>Naive backpressure - make all calls to bottleneck synced.
<figure>
    <img src="/images/0120.png"/> 
</figure>
</li>
<li>Problem: limitation of incoming connection is still required. Add more workers - how to increase limits? Not all the requests have the same cost. 90% - 1ms, 5% - 5ms, 5% - 250ms. Pessimistic and safe &lt;-&gt; Optimistic and unsafe.</li>
<li>pull-base control flow - the same as synced</li>
<li>Example of ghost request when the sender see ‘sent and accepted TCP request’, while the receiver never logs it. (it didn’t receive it)</li>
<li>bounded queues: fail fast if queue is full. Problem: queue process is also a limitation (copy message, copy from mailbox to heap, then shed)</li>
<li>counter-protected process: counter to send request</li>
<li>Probing for quality and adjusting behaviour:

<ul>
<li>queue time (sum of all the reqs - more avg stats)</li>
<li>randomly drop requests (from the queue - shedding, before queue - back-pressure)</li>
<li>sometimes you can’t loose messages</li>
</ul></li>
<li>Capacity probes (CPU?memory in system, send buffers of network get filled, etc)

<ul>
<li>circuit breaker - fail if a lot of fails for this service (3 failures during 10 secs - do not send more reqs)</li>
<li>drop specific operations (return error)
-</li>
</ul></li>
</ul>


		
	</div>

	<div class="pagination">
		<a href="/devzen_note/0119/" class="left arrow">&#8592;</a>
		<a href="/devzen_note/0121/" class="right arrow">&#8594;</a>

		<a href="#" class="top">Top</a>
	</div>
</main>


        		<footer>
			<span>
			&copy; <time datetime="2019-04-20 23:27:23.843591 &#43;0400 &#43;04 m=&#43;0.077991965">2019</time> . Made with <a href='https://gohugo.io'>Hugo</a> using the <a href='https://github.com/EmielH/tale-hugo/'>Tale</a> theme.
			</span>
		</footer>

    </body>
</html>
